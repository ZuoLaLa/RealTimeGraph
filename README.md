# 实时显示曲线控件设计文档 #

控件的实现参照了博客园上两篇文章，在此表示感谢，并附上链接：

1. 原始控件：http://www.cnblogs.com/xf_z1988/archive/2010/05/11/CSharp_WinForm_Waveform.html
2. 升级后的控件：http://www.cnblogs.com/pengpai/archive/2013/05/19/3086778.html

针对自己的实际需求，作了一些精简：
 
 + 每个曲线控件只显示一条曲线；
 + 去除用户自行设定曲线样式等一堆细节部分，直接在控件中设定好。

一开始就直接参照两位博主的最终程序，可能抓不住重点。
首先还是需要实现基本功能，随着实际的使用，再考虑加入和修改一些细节方面的东西：比如友好坐标系统的实现、网格等等。

控件主体框架如下：
## 一、功能模式 ##
1. **全局模式**

	随着时间的进行，X、Y坐标轴实时更新，X轴范围为所有数据点。

2. **滚动模式**

	随着时间的进行，X、Y坐标轴实时更新，X轴范围为固定数目的数据点。

	根据数据点数目的不同，可以衍生出如下三种形态：

	a. 初始默认范围
	
	b. 放大状态，鼠标点击绘图区域一次显示更多的数据点
	
	c. 缩小状态，鼠标点击绘图区域一次显示更少的数据点

3. **静止模式**

	X、Y坐标轴不随时间变动，此模式用于一些特定的功能模式，如：

	a. 框选放大模式：通过鼠标拖动指定一个矩形区域，使绘图画布放大显示该区域
	
	b. 拖动模式：通过鼠标拖动，实时平移曲线，追溯历史曲线

## 二、坐标轴状态 ##

通过两个布尔型变量控制坐标轴的显示状态，组合表示上述三种模式：

1.	坐标是否要随时间移动：`isAutoMove`（这个主要针对的是X轴）
2.	当坐标随时间移动时，是否实时调整坐标范围：`isAutoScale`
（默认Y轴始终实时调整，显示整个数据范围，静止模式除外。）

具体组合关系如下表：

							 isAutoScale
						   true	  |  false
				------------------------------
				| true	| 全局模式 | 滚动模式 |
	isAutoMove	|-------|---------|-----------
				| false	|	   静止模式		 |

各模式下的子模式通过绘图区域的鼠标事件来实现。


### 后续开发步骤 ###

1.	[x]拖动模式
2.	[x]框选放大模式
3.	[x]滚动模式下的放大缩小
4.	[x]友好坐标系统
5.	[x]网格显示
6.	[x]修复坐标遮挡的问题
7.	[ ]Y 轴刻度与网格不严格对齐
8.	[ ]修复拖动和放大操作时，控件大小不变，一级和二级刻度发生变化的问题

